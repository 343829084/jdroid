language: android

jdk:
  - oraclejdk7
  
secure: "SRRfxYntvJbHO8WZ5xhtky0+QpR/1FeGOi6mMI/IQ1We/tb0lmMU2gdJw82a9ItnEWRWFcia45OHPFWOsSwGmoovvLYLiUGbu5qJjzjvGmYQNGr57/JTe7FtUE75ypFJGuB3h+ZyU/kwVE9Z6UCh3uM3wR6Ql3EOrMl4kJvs7ec="

android:
  components:
  
    # The BuildTools version used by your project
    - build-tools-19.1.0

    # The SDK version used to compile your project
    - android-19

script: sh ./ci.sh

after_success:
    - git clone https://github.com/maxirosson/jdroid.git
    - cd jdroid
    - git config user.name '${GIT_NAME}'
    - git config user.email '${GIT_EMAIL}'
    - git config credential.helper "store --file=.git/credentials"
    - echo "https://${GH_TOKEN}:@github.com" > .git/credentials
    - git checkout artifacts
    - git cp ../jdroid-sample-android/target/*  ./artifacts/master/
    - git add -A
    - git commit -m 'Adding jdroid sample android apk'
    - git push origin HEAD:artifacts
    - cd ..

deploy:
  provider: heroku
  strategy: git
  app: 
    master: jdroid-sample-server-staging
    production: jdroid-sample-server-production
  api_key:
    secure: Q8uusS6U/LmuOkCQN/j88g0OpV/E5os0ZSo2XdhD0U6Lij554F9aem54hjoxVgLilJhSv6GkD6hoBmNR1vwc2Azfh+mftBRd/x2FiikRSTf6p9l4p5c3/kvNX/c0fy6+Dcfe9NXogIFY3dhCCVTbQCTD05IZ9my4eAp629jWyFw=
